#!/bin/bash
# -*- mode: bash; tab-width: 2; -*-
# vim: ts=2 sw=2 ft=bash noet

# source the Nos framework
. /opt/nos/common.sh

# initialize Nos with the original arguments
nos_init "$@"

# source common lib
. ${engine_lib_dir}/ruby.sh

# install ruby, jruby, or rubinius interpreters
install_runtime

# install bundler binary
install_bundler

# install dependencies for services so native extensions can be compiled
# install_dependencies

# run bundle install
bundle_install

# clean unused gems from the vendor
bundle_clean

# persist all environment variables
nos_persist_evars

exit 0
